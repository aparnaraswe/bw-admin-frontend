<div class="orders-container">
  <h1 class="title">All Orders</h1>

  <div class="order-table">
    <div class="order-header-row">
      <div class="col order-no">Order No</div>
      <div class="col customer">Customer</div>
      <div class="col date">Date</div>
      <div class="col status">Status</div>
      <div class="col total">Total</div>
      <div class="col action">Action</div>
    </div>

    <div *ngFor="let order of orders" class="order-row">

      <!-- Order summary row -->
      <div class="order-summary" (click)="toggleExpand(order.id)">
        <div class="col order-no">{{ order.order_number }}</div>
        <div class="col customer">{{ order.email || '-' }}</div>
        <div class="col date">{{ order.created_at | date:'mediumDate' }}</div>
        <div class="col status">
          <span class="status-badge" [ngClass]="order.status?.toLowerCase()">{{ order.status }}</span>
        </div>
        <div class="col total">₹{{ order.final_amount | number:'1.2-2' }}</div>
        <div class="col action">
          <button class="view-btn">
            {{ expandedOrderId === order.id ? 'Hide' : 'View' }}
          </button>
        </div>
      </div>

      <!-- Expanded items table -->
      <div *ngIf="expandedOrderId === order.id" class="order-details">
        <table class="items-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Variant</th>
              <th>Qty</th>
              <th>Price (₹)</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of order.items">
              <td>{{ item.product_name || 'N/A' }}</td>
              <td>{{ item.variant || '-' }}</td>
              <td>{{ item.quantity || '-' }}</td>
              <td>{{ item.price ? (item.price | number:'1.2-2') : '-' }}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>

  <!-- ✅ Pagination Section -->
  <div class="pagination-container" *ngIf="totalCount > itemsPerPage">
    <button 
      class="pagination-btn"
      (click)="previousPage()"
      [disabled]="currentPage === 1">
      Previous
    </button>

    <span class="page-info">
      Page {{ currentPage }} of {{ totalPages() }}
    </span>

    <button 
      class="pagination-btn"
      (click)="nextPage()"
      [disabled]="currentPage >= totalPages()">
      Next
    </button>
  </div>

</div>
